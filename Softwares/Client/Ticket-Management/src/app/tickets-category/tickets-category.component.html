
<div class="row">
  <div class="col-md-12 text-center">
    <h2>Tickets</h2>
  </div>
</div>
<div class="row">
  <div class="col-md-12 text-center">
    <div class="row">
      <div class="col-md-2"></div>
      <div class="col-md-2 type-div">
        <label >Type</label><br>
        <select name="devicetype" class="form-control" [(ngModel)]="devicetype">
          <option value="Mobile">Mobile</option>
          <option value="Laptop">Laptop</option>
        </select>
      </div>
      <div class="col-md-4">
        <h3>Select Category</h3>

        <ng-select [allowClear]="true"
                   [items]="CategoryList"
                   [disabled]="disabled"
                   (data)="refreshValue($event)"
                   (selected)="selected($event)"
                   (removed)="removed($event)"
                   (typed)="typed($event)"
                   placeholder="No Category selected">
        </ng-select>
        <button type="btn" class="btn btn-danger" (click)="DisplayTable(devicetype,SelectedValue)" >Search Tickets</button>
      </div>
      <div class="col-md-4"></div>
    </div>
  </div>
</div>
<section class="success" id="courses">
  <div class="container">
    <table class="table table-striped" [mfData]="FilterCatagory" #mf="mfDataTable" [mfRowsOnPage]="5">
      <thead>
      <tr>
        <th style="width: 12%">
          <mfDefaultSorter by="S.No">Ticket Id</mfDefaultSorter>
        </th>
        <th style="width: 12%">
          <mfDefaultSorter by="name">Ticket Name</mfDefaultSorter>
        </th>
        <th style="width: 12%">
          <mfDefaultSorter by="status">Status</mfDefaultSorter>
        </th>
        <th style="width: 12%">
          <mfDefaultSorter by="priority">Prority</mfDefaultSorter>
        </th>
        <th style="width: 12%">
          <mfDefaultSorter by="Actions">Actions</mfDefaultSorter>
        </th>
      </tr>
      </thead>
      <tbody >
      <tr *ngFor="let item of this.FilterCatagory;let position=index" >
        <td bgcolor="#ff7f50">{{item.Ticket_No}}</td>
        <td bgcolor="#ff7f50">{{item.name}}</td>
        <td bgcolor="#ff7f50">
          <select name="status" class="selectpicker" [(ngModel)]="status">

          <option value="Open">Open</option>
          <option value="Close">Close</option>
        </select>
        </td>
        <td bgcolor="#ff7f50">{{item.priority}}</td>
        <td><button type="button" class="btn btn-success btn-sm" (click)="view(item.Ticket_No)">View</button>
          <button type="button" class="btn btn-success btn-sm" (click)="edit(item.Ticket_No)"  >Edit</button>
          <button type="button" class="btn btn-success btn-sm" (click)="delete(position,item.Ticket_No)" >Delete</button>
        </td>

      </tr>
      </tbody>
      <tbody *ngIf="FilterCatagory.length==0">
      <tr>
        <td colspan="100" class="text-center">
          <p>No Tickets are Registered!!!</p>
        </td>
      </tr>
      </tbody>

      <tfoot>
      <tr>
        <td colspan="4">
          <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25]"></mfBootstrapPaginator>
        </td>
      </tr>
      </tfoot>
    </table>
  </div>
</section>

<!--
///////////////////////////////////View Modal////////////////////////////////
-->
<div bsModal #viewModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">View Ticket</h4>
        <button type="button" class="close pull-right" aria-label="Close" >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table class="table">
          <tbody>

          <tr>
            <td class="text-success"><i class="fa fa-user"></i> Ticket No</td>
            <td>{{ViewRecord.Ticket_No}}</td>
          </tr>
          <tr>
            <td class="text-success"><i class="fa fa-list-ol"></i> Ticket Discription</td>
            <td>{{ViewRecord.Discription}}</td>
          </tr>
          <tr>
            <td class="text-success"><i class="fa fa-book"></i> Category</td>
            <td>{{ViewRecord.category}}</td>
          </tr>
          <tr>
            <td class="text-success"><i class="fa fa-group"></i> Type </td>
            <td>{{ViewRecord.type}}</td>
          </tr>
          <tr>
            <td class="text-success"><i class="fa fa-calendar"></i> Status</td>
            <td>{{ViewRecord.status}}</td>
          </tr>

          <tr>
            <button type="button" class="btn btn-success btn-sm"  (click)="resolve()">Resolve</button>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<!--
///////////////////////////////////////Edit Modal////////////////////////////////-->
<div bsModal #editModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-body">
        <div class="container">
          <div class="row">
              <h1>Edit Ticket</h1>
            <button type="button" class="close pull-right" aria-label="Close" (click)="hideChildModal()">
              <span aria-hidden="true">&times;</span>
            </button>
            <form class="form-horizontal"  novalidate >

              <div class="form-group">
                <div class="col-sm-6">
                  <label >Type</label><br>
                  <select name="type" [(ngModel)]="EditTicketType">
                    <option value="Laptop">Laptop</option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <div class="col-sm-6">
                  <label >Category:</label><br>
                  <select name="category" [(ngModel)]="EditTicketCategory">
                    <option value="Spare Parts">Spare Parts</option>
                    <option value="Manufacture Defect">Manufacture Defect</option>
                    <option value="Parts Replacement">Parts Replacement</option>
                    <option value="Parts Replacement">Battery Leakage</option>
                    <option value="Parts Replacement">Charger Defect</option>
                    <option value="Parts Replacement">Warrenty Extension</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-2">
                  <label >Name</label>
                  <input type="text" class="form-control"  name="EditTicketName"   minlength="6" required placeholder="Name" name="EditTicketName" [(ngModel)]="EditTicketName" >
                </div>
              </div>

              <div class="form-group">

                <div class="col-sm-2">
                  <label >Discription</label>
                  <textarea  class="form-control"  name="EditTicketDiscription"  minlength="10" required name="EditTicketDiscription" [(ngModel)]="EditTicketDiscription"></textarea>
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-6">
                  <label >Priorty</label><br>
                  <select class="form-control" name="priority" [(ngModel)]="EditTicketPriorty">
                    <option value="high">High</option>
                    <option value="low">Low</option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <div  class="col-sm-6">
                  <button type="btn" class="btn btn-primary"  (click)="UpdatedRecord(editedticket,this.editcategory)" >Save</button>
                  <button type="btn" class="btn btn-danger" (click)="NoUpdate()" >Close</button>

                </div>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--
///////////////////////////////deleteModal/////////////////////////////-->
<div bsModal #deleteModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-body">
        <div class="container">
          <div class="row">
            <button type="button" class="close pull-right" aria-label="Close" >
              <span aria-hidden="true">&times;</span>
            </button>
            <p>Do You Want To Delete Ticket Id:- {{delete_key}}</p>
            <div  class="col-sm-6">
              <button type="btn" class="btn btn-primary" (click)="deleteconformation(delete_index,delete_key)" >Yes</button>
              <button type="btn" class="btn btn-danger"  (click)="notconformation()">No</button>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
